{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n} //\n// EventSource class - This class provides simple event functionality for classes, with Promise support.\n//\n//\tUsage for once-off event listeners:\n//\n//\t\tmyObj.when(\"closed\").then(function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage for permanent event listeners:\n//\n//\t\tmyObj.on(\"closed\", function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage when triggering an event from a subclass:\n//\n//\t\tthis.emit(\"closed\", \"customData\");\n//\n\n\nvar EventSource = function () {\n  function EventSource() {\n    _classCallCheck(this, EventSource);\n  }\n\n  _createClass(EventSource, [{\n    key: \"when\",\n\n    /** Adds an event listener. If callback is null, a Promise will be returned. Note that if using the Promise\r\n     *  it will only be triggered on the first event emitted. */\n    value: function when(eventName) {\n      var _this = this;\n\n      var callback = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1]; // Make sure event listener object exists\n\n      this._eventListeners = this._eventListeners || {}; // Make sure event listener array exists\n\n      this._eventListeners[eventName] = this._eventListeners[eventName] || []; // Check if using promise form\n\n      if (callback) {\n        // Just add the callback\n        this._eventListeners[eventName].push(callback);\n      } else {\n        // Return the promise\n        return new Promise(function (onSuccess, onFail) {\n          // Promise callbacks can only be used once\n          onSuccess._removeAfterCall = true; // Add success handler to event listener array\n\n          _this._eventListeners[eventName].push(onSuccess);\n        });\n      }\n    }\n    /** Synonyms */\n\n  }, {\n    key: \"on\",\n    value: function on() {\n      return this.when.apply(this, arguments);\n    }\n  }, {\n    key: \"addEventListener\",\n    value: function addEventListener() {\n      return this.when.apply(this, arguments);\n    }\n    /** Triggers an event. Each argument after the first one will be passed to event listeners */\n\n  }, {\n    key: \"emit\",\n    value: function emit(eventName) {\n      // Get list of callbacks\n      var callbacks = this._eventListeners && this._eventListeners[eventName] || []; // Call events\n\n      for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = callbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var callback = _step.value; // Call it\n\n          callback.apply(this, args);\n        } // Remove callbacks that can only be called once\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      for (var i = 0; i < callbacks.length; i++) {\n        if (callbacks[i]._removeAfterCall) callbacks.splice(i--, 1);\n      }\n    }\n    /** Synonyms */\n\n  }, {\n    key: \"trigger\",\n    value: function trigger() {\n      return this.emit.apply(this, arguments);\n    }\n  }, {\n    key: \"triggerEvent\",\n    value: function triggerEvent() {\n      return this.emit.apply(this, arguments);\n    }\n  }]);\n\n  return EventSource;\n}(); // Apply as a mixin to a class or object\n\n\nexports.default = EventSource;\n\nEventSource.mixin = function (otherClass) {\n  for (var prop in EventSource.prototype) {\n    if (EventSource.prototype.hasOwnProperty(prop)) otherClass[prop] = EventSource.prototype[prop];\n  }\n};\n\nmodule.exports = exports[\"default\"];","map":{"version":3,"sources":["D:/finno_test/frontend/node_modules/js-alert/lib/event-source.js"],"names":["Object","defineProperty","exports","value","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","EventSource","when","eventName","_this","callback","arguments","undefined","_eventListeners","push","Promise","onSuccess","onFail","_removeAfterCall","on","apply","addEventListener","emit","callbacks","_len","args","Array","_key","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","next","done","err","return","splice","trigger","triggerEvent","default","mixin","otherClass","prop","hasOwnProperty","module"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n//\n// EventSource class - This class provides simple event functionality for classes, with Promise support.\n//\n//\tUsage for once-off event listeners:\n//\n//\t\tmyObj.when(\"closed\").then(function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage for permanent event listeners:\n//\n//\t\tmyObj.on(\"closed\", function(data) {\n//\t\t\talert(\"Closed! \" + data);\n//\t\t});\n//\n//\n//\tUsage when triggering an event from a subclass:\n//\n//\t\tthis.emit(\"closed\", \"customData\");\n//\n\nvar EventSource = function () {\n\tfunction EventSource() {\n\t\t_classCallCheck(this, EventSource);\n\t}\n\n\t_createClass(EventSource, [{\n\t\tkey: \"when\",\n\n\n\t\t/** Adds an event listener. If callback is null, a Promise will be returned. Note that if using the Promise\r\n   *  it will only be triggered on the first event emitted. */\n\t\tvalue: function when(eventName) {\n\t\t\tvar _this = this;\n\n\t\t\tvar callback = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\n\n\t\t\t// Make sure event listener object exists\n\t\t\tthis._eventListeners = this._eventListeners || {};\n\n\t\t\t// Make sure event listener array exists\n\t\t\tthis._eventListeners[eventName] = this._eventListeners[eventName] || [];\n\n\t\t\t// Check if using promise form\n\t\t\tif (callback) {\n\n\t\t\t\t// Just add the callback\n\t\t\t\tthis._eventListeners[eventName].push(callback);\n\t\t\t} else {\n\n\t\t\t\t// Return the promise\n\t\t\t\treturn new Promise(function (onSuccess, onFail) {\n\n\t\t\t\t\t// Promise callbacks can only be used once\n\t\t\t\t\tonSuccess._removeAfterCall = true;\n\n\t\t\t\t\t// Add success handler to event listener array\n\t\t\t\t\t_this._eventListeners[eventName].push(onSuccess);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t/** Synonyms */\n\n\t}, {\n\t\tkey: \"on\",\n\t\tvalue: function on() {\n\t\t\treturn this.when.apply(this, arguments);\n\t\t}\n\t}, {\n\t\tkey: \"addEventListener\",\n\t\tvalue: function addEventListener() {\n\t\t\treturn this.when.apply(this, arguments);\n\t\t}\n\n\t\t/** Triggers an event. Each argument after the first one will be passed to event listeners */\n\n\t}, {\n\t\tkey: \"emit\",\n\t\tvalue: function emit(eventName) {\n\n\t\t\t// Get list of callbacks\n\t\t\tvar callbacks = this._eventListeners && this._eventListeners[eventName] || [];\n\n\t\t\t// Call events\n\n\t\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\t\targs[_key - 1] = arguments[_key];\n\t\t\t}\n\n\t\t\tvar _iteratorNormalCompletion = true;\n\t\t\tvar _didIteratorError = false;\n\t\t\tvar _iteratorError = undefined;\n\n\t\t\ttry {\n\t\t\t\tfor (var _iterator = callbacks[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t\t\t\t\tvar callback = _step.value;\n\n\n\t\t\t\t\t// Call it\n\t\t\t\t\tcallback.apply(this, args);\n\t\t\t\t}\n\n\t\t\t\t// Remove callbacks that can only be called once\n\t\t\t} catch (err) {\n\t\t\t\t_didIteratorError = true;\n\t\t\t\t_iteratorError = err;\n\t\t\t} finally {\n\t\t\t\ttry {\n\t\t\t\t\tif (!_iteratorNormalCompletion && _iterator.return) {\n\t\t\t\t\t\t_iterator.return();\n\t\t\t\t\t}\n\t\t\t\t} finally {\n\t\t\t\t\tif (_didIteratorError) {\n\t\t\t\t\t\tthrow _iteratorError;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < callbacks.length; i++) {\n\t\t\t\tif (callbacks[i]._removeAfterCall) callbacks.splice(i--, 1);\n\t\t\t}\n\t\t}\n\n\t\t/** Synonyms */\n\n\t}, {\n\t\tkey: \"trigger\",\n\t\tvalue: function trigger() {\n\t\t\treturn this.emit.apply(this, arguments);\n\t\t}\n\t}, {\n\t\tkey: \"triggerEvent\",\n\t\tvalue: function triggerEvent() {\n\t\t\treturn this.emit.apply(this, arguments);\n\t\t}\n\t}]);\n\n\treturn EventSource;\n}();\n\n// Apply as a mixin to a class or object\n\n\nexports.default = EventSource;\nEventSource.mixin = function (otherClass) {\n\n\tfor (var prop in EventSource.prototype) {\n\t\tif (EventSource.prototype.hasOwnProperty(prop)) otherClass[prop] = EventSource.prototype[prop];\n\t}\n};\nmodule.exports = exports[\"default\"];"]},"metadata":{},"sourceType":"script"}